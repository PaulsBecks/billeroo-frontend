(this["webpackJsonpreact-4798tj"]=this["webpackJsonpreact-4798tj"]||[]).push([[9],{822:function(e,t,a){"use strict";a.r(t);var n=a(27),c=a(22),r=a(15),l=a.n(r),i=a(24),o=a(13),u=a(0),m=a.n(u),s=a(28),p=a(261),d=a(810),b=a(42),E=a(808),f=a(23),h=a(375),j=a(37),v=a(264),O=a(266),g=a(133),y=a.n(g),C=a(284),k=a(82),w=a(81),x=a.n(w),S=Object(k.a)().backendURL+"/email/invoice";function D(e){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)(t);case 2:n=e.sent,r=n.output("datauristring"),D(Object(c.a)({data:r},a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=a(809),P=a(72),A=a(44),F=a.n(A);function G(e){var t=e.invoice,a=e.setInvoice,r=e.onSend,l=Object(u.useState)({to:"",fileName:t.invoiceNumber}),i=Object(o.a)(l,2),s=i[0],d=i[1],E=Object(u.useState)(!1),f=Object(o.a)(E,2),h=f[0],j=f[1],v=Object(u.useState)(F.a.createValueFromString("<b>Versandadresse des Kunden</b><br/>"+t.customer.shippingAddress,"html")),O=Object(o.a)(v,2),g=O[0],y=O[1];return m.a.createElement(N.a,{open:!0,onClose:function(){return a()}},m.a.createElement(N.a.Header,null,"Rechnungs-PDF per Email Verschicken"),m.a.createElement(N.a.Content,null,m.a.createElement(b.a,null,m.a.createElement(b.a.Input,{label:"An",name:"to",value:s.to,placeholder:"max-mustermann@email.de",onChange:function(e,t){var a=t.name,r=t.value;return d(Object(c.a)({},s,Object(n.a)({},a,r)))}}),m.a.createElement(b.a.Input,{label:"Rechnungsdateiname",name:"fileName",value:s.fileName,onChange:function(e,t){var a=t.name,r=t.value;return d(Object(c.a)({},s,Object(n.a)({},a,r)))}}),m.a.createElement(b.a.Field,{label:"Emailtext",name:"text",value:g,control:P.a,onChange:y}))),m.a.createElement(N.a.Actions,null,m.a.createElement(p.a,{negative:!0,icon:"close",labelPosition:"right",content:"Abbrechen",onClick:function(){return a()}}),m.a.createElement(p.a,{primary:!0,icon:"send",labelPosition:"right",content:"Senden",onClick:function(){j(!0),r(Object(c.a)({text:g.toString("html")},s))},loading:h})))}a(93);var L=function(){var e=Object(s.h)(),t=Object(o.a)(e,4),a=t[0],r=t[2],g=t[3],C=Object(u.useState)(),k=Object(o.a)(C,2),w=k[0],x=k[1],S=Object(u.useState)(),D=Object(o.a)(S,2),H=D[0],I=D[1];Object(s.f)();var N=Object(j.f)(),P=Object(j.h)().path;function A(){return(A=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("singlePage",t);case 2:I();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){w&&function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)("singlePage",w.invoiceNumber);case 2:x();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[w]),m.a.createElement(j.c,null,m.a.createElement(j.a,{exact:!0,path:P},m.a.createElement("div",{className:"invoice-tab-container"},m.a.createElement(p.a,{onClick:function(){return N.push("".concat(P,"/new"))},primary:!0},"Neue Rechnung"),m.a.createElement(d.a,{celled:!0},m.a.createElement(d.a.Header,null,m.a.createElement(d.a.Row,null,m.a.createElement(d.a.HeaderCell,null,"Rechnungsnummer"),m.a.createElement(d.a.HeaderCell,null,"Rechnungsdatum"),m.a.createElement(d.a.HeaderCell,null,"Kunde"),m.a.createElement(d.a.HeaderCell,null,"Artikel"),m.a.createElement(d.a.HeaderCell,null,"Gesamtpreis"),m.a.createElement(d.a.HeaderCell,null,"Zahlungseingang"),m.a.createElement(d.a.HeaderCell,null))),m.a.createElement(d.a.Body,null,a.map((function(e){return e&&"object"===typeof e&&m.a.createElement(d.a.Row,{key:e.id},m.a.createElement(d.a.Cell,null,e.invoiceNumber),m.a.createElement(d.a.Cell,null,Object(f.b)(e.invoiceDate)),m.a.createElement(d.a.Cell,null,e.customer.name),m.a.createElement(d.a.Cell,null,e.articles.map((function(e){return m.a.createElement("p",null,e.name)}))),m.a.createElement(d.a.Cell,null,Object(f.c)(e.totalPrice)," \u20ac"),m.a.createElement(d.a.Cell,null,m.a.createElement(b.a,{style:{marginBottom:0}},m.a.createElement(b.a.Group,{style:{display:"flex",alignItems:"center",margin:"0"}},m.a.createElement(E.a,{onChange:function(t,a){var r,l,i=a.name,o=a.checked;o?g(Object(c.a)({},e,(r={},Object(n.a)(r,i,o),Object(n.a)(r,"paymentDate",new Date),r))):g(Object(c.a)({},e,(l={},Object(n.a)(l,i,o),Object(n.a)(l,"paymentDate",void 0),l)))},name:"payed",checked:e.payed,toggle:!0}),e.paymentDate?m.a.createElement(b.a.Field,{selected:new Date(e.paymentDate),onChange:function(t){return g(Object(c.a)({},e,{paymentDate:t}))},control:y.a,dateFormat:"dd/MM/yyyy",transparent:!0}):m.a.createElement("span",{style:{marginLeft:"0.5em"}},"Ausstehend")))),m.a.createElement(d.a.Cell,{style:{}},m.a.createElement(p.a,{primary:!0,icon:"edit",onClick:function(){return N.push("".concat(P,"/").concat(e.id))}}),m.a.createElement(p.a.Group,null,m.a.createElement(p.a,{secondary:!0,icon:"download",onClick:function(){return x(e)}}),m.a.createElement(p.a,{style:{borderLeft:"1px solid white",marginRight:"2px"},secondary:!0,icon:"mail",onClick:function(){return I(e)}}))," ",m.a.createElement(p.a,{negative:!0,icon:"trash",onClick:function(){return r(e.id)}})))})))),m.a.createElement("div",{style:{position:"absolute",opacity:"0.0"}},(w||H)&&m.a.createElement(h.a,{id:"singlePage",invoice:w||H})),H&&m.a.createElement(G,{invoice:H,setInvoice:I,onSend:function(e){return A.apply(this,arguments)}}))),m.a.createElement(j.a,{exact:!0,path:"".concat(P,"/new")},m.a.createElement(v.a,{updateInvoice:g})),m.a.createElement(j.a,{path:"".concat(P,"/:invoiceId")},m.a.createElement(O.a,{updateInvoice:g})))};a.d(t,"default",(function(){return L}))}}]);
//# sourceMappingURL=9.6795e979.chunk.js.map