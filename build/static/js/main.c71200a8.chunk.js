(this["webpackJsonpreact-4798tj"]=this["webpackJsonpreact-4798tj"]||[]).push([[0],{305:function(e,a,t){e.exports=t(564)},462:function(e,a,t){},463:function(e,a,t){},465:function(e,a,t){},555:function(e,a,t){},556:function(e,a,t){},564:function(e,a,t){"use strict";t.r(a);var n=t(11),l=t(0),r=t.n(l),c=t(39),o=t(18),i=t(26);function u(e,a){var t=Object(l.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):a}catch(n){return console.log(n),a}})),r=Object(n.a)(t,2),c=r[0],o=r[1];return[c,function(a){try{var t=a instanceof Function?a(c):a;o(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(n)}}]}var m={name:"",empty:!0,price:"",isbn:"",amount:1,authors:[]},s={name:"Max Mustermann",invoiceAddress:"<p>musterdomain.de<br/>  Muster Firma GbR<br/>  Musterstra\xdfe 2<br/>  15366 Musterstadt</p>",shippingAddress:"<p>musterdomain.de \u2022 Muster Firma GbR<br/>  Musterstra\xdfe 2 \u2022 15366 Musterstadt</p>",discount:0,ust:7},d={invoiceDate:(new Date).toString(),shippingDate:(new Date).toString(),orderDate:(new Date).toString(),invoiceNumber:"",porto:"5.00",finalText:"",articles:[]},E=t(31),b=t.n(E),v={name:"",executive:"",logo:"",aboveClientInvoiceAddress:"<p>Verlag GbR \u2022 Musterstra\xdfe 12 \u2022 10405 Musterstadt</p>",footerText:"<p><b>Gesch\xe4ftsf\xfchrung</b> Max Mustermann<br/>  <b>Bankverbindung</b> Postbank \u2022 IBAN DE 00 0000 0000 0000 00 \u2022 BIC ABCDEFGHIJKL<br/>  <b>Steuernummer</b> 000/000/00000 | <b>USt-IdNr.</b> DE000000000</p>",invoiceText:"<p>Zahlen Sie bitte den Rechnungsbetrag bis zum <Datum> unter Angabe der Rechnungsnummerauf unten stehendes Konto.<br/>Die gelieferte Ware bleibt bis zur vollst\xe4ndigen Bezahlung Eigentum des Verlages.<br/>Vielen Dank f\xfcr Ihre Bestellung.</p><p>Mit herzlichen Gr\xfc\xdfen.<br/>Musterstadt, den <Datum></p>",subjectAndBelow:"<h3>Rechnung</h3>  <p><br></p>  <p>wir erlauben uns, in Rechnung zu stellen:</p>",contactInformation:"<p>Buch- und Zeitschriftenverlag GbR<br>  Max Mustermann</p>  <p>Hauptsitz<br>  Musterstra\xdfe 12<br>  10405 Musterstadt<br>  Telefon 000 / 00 00 00</p>  <p>B\xfcro Musterstadt<br>  Musterstra\xdfe 19<br>  10409 Musterstadt<br>  Telefon 030 / 00 00 00 00</p>  <p>info@muster-email.de<br>  www.musterdomain.de</p>  <p>Steuernummer 000/000/00000<br>  Finanzamt Musterstadt</p>"},p={name:"",contact:"",books:[]};function f(){return u("company",v)}function g(){return u("invoices",[])}function h(){return u("articles",[])}function C(){return u("authors",[])}function O(){return u("customers",[])}var y=t(568),j=t(579),N=t(582),S=t(21),I=t(580),k=t(577);function F(e){var a=Object(l.useState)(!1),t=Object(n.a)(a,2),c=t[0],o=t[1];return console.log(c),r.a.createElement(b.a,Object.assign({},e,{onFocus:function(){return o(!0)},onBlur:function(){e.onBlur&&"function"===typeof e.onBlur&&e.onBlur(),o(!1)},toolbarConfig:{display:c?["INLINE_STYLE_BUTTONS","BLOCK_TYPE_BUTTONS","LINK_BUTTONS","BLOCK_TYPE_DROPDOWN","HISTORY_BUTTONS"]:[],INLINE_STYLE_BUTTONS:[{label:"Bold",style:"BOLD",className:"custom-css-class"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"}],BLOCK_TYPE_DROPDOWN:[{label:"Normal",style:"unstyled"},{label:"Heading Large",style:"header-one"},{label:"Heading Medium",style:"header-two"},{label:"Heading Small",style:"header-three"}],BLOCK_TYPE_BUTTONS:[{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"}]}}))}function w(e){var a=e.customer,t=e.setCustomer,c=Object(l.useState)(b.a.createValueFromString(a.invoiceAddress,"html")),i=Object(n.a)(c,2),u=i[0],m=i[1],s=Object(l.useState)(b.a.createValueFromString(a.shippingAddress,"html")),d=Object(n.a)(s,2),E=d[0],v=d[1];Object(l.useEffect)((function(){m(b.a.createValueFromString(a.invoiceAddress,"html")),v(b.a.createValueFromString(a.shippingAddress,"html"))}),[a]);var p=function(e,n){var l=n.name,r=n.value;("ust"!==l&&"discount"!==l||(r=parseFloat(r),!isNaN(r)))&&t(Object(o.a)({},a,Object(S.a)({},l,r)))},f=function(e,n){t(Object(o.a)({},a,Object(S.a)({},e,n.toString("html"))))};return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Field,{control:k.a,label:"Kundenname",value:a.name,name:"name",onChange:p})),r.a.createElement(I.a.Field,{control:F,label:"Rechnungsadresse",onChange:m,value:u,onBlur:function(){f("invoiceAddress",u)}}),r.a.createElement(I.a.Field,{control:F,label:"Lieferadress",onChange:v,value:E,onBlur:function(){f("shippingAddress",E)}}),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Field,{control:k.a,label:"MwST",placeholder:"7",name:"ust",icon:"percent",onChange:p,value:a.ust}),r.a.createElement(I.a.Field,{control:k.a,label:"Kundenrabatt",placeholder:"0",icon:"percent",name:"discount",onChange:p,value:a.discount})))}var B=function(){var e=u("customers",[]),a=Object(n.a)(e,2),t=a[0],c=a[1],m=Object(l.useState)(),d=Object(n.a)(m,2),E=d[0],b=d[1];return r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return b(Object(o.a)({},s,{id:t.length}))},primary:!0},"Neuer Kunde"),E&&r.a.createElement(j.a,{onClose:function(){return b()},open:!0},r.a.createElement(j.a.Header,null,"Kunde"),r.a.createElement(j.a.Content,null,r.a.createElement(w,{customer:E,setCustomer:b})),r.a.createElement(j.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return b()},content:"Abbrechen",negative:!0,icon:"close",labelPosition:"right"}),r.a.createElement(y.a,{onClick:function(){c([].concat(Object(i.a)(t),[E])),b()},content:"Speichern",primary:!0,icon:"check",labelPosition:"right"}))),r.a.createElement(N.a,{celled:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Name"),r.a.createElement(N.a.HeaderCell,null,"Rechnungsadresse"),r.a.createElement(N.a.HeaderCell,null,"Lieferadress"),r.a.createElement(N.a.HeaderCell,null,"Rabatt"),r.a.createElement(N.a.HeaderCell,null,"MwST"))),r.a.createElement(N.a.Body,null,t.map((function(e){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.name),r.a.createElement(N.a.Cell,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.invoiceAddress}})),r.a.createElement(N.a.Cell,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.shippingAddress}})),r.a.createElement(N.a.Cell,null,e.discount),r.a.createElement(N.a.Cell,null,e.ust))})))))},A=(t(462),t(581)),D=t(95);function H(e){var a=e.article,t=e.setArticle,c=Object(l.useState)(a.price),u=Object(n.a)(c,2),m=u[0],s=u[1],d=Object(l.useState)(""),E=Object(n.a)(d,2),b=E[0],v=E[1],p=C(),f=Object(n.a)(p,1)[0],g=Object(l.useMemo)((function(){return f.filter((function(e){return e&&e.name.includes(b)}))}),[f,b]);var h=function(e,n){var l=n.name,r=n.value;if("price"===l){if(r=parseFloat(r),isNaN(r))return void s("");r=r.toFixed(2),s(r)}t(Object(o.a)({},a,Object(S.a)({},l,r)))};return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{width:"equal"},r.a.createElement(I.a.Field,{id:"form-input-control-name",control:k.a,label:"Name",placeholder:"Name",name:"name",onChange:h,value:a.name}),r.a.createElement(I.a.Field,{id:"form-input-control-name",control:k.a,label:"Lagerbestand",placeholder:"Menge",type:"number",onChange:h,name:"amount",value:a.amount})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Field,{id:"form-input-control-last-name",control:k.a,label:"ISBN",placeholder:"ISBN",name:"isbn",onChange:h,value:a.isbn}),r.a.createElement(I.a.Field,{id:"form-input-control-last-name",control:k.a,label:"Preis",placeholder:"Preis",name:"price",icon:"euro sign",onChange:function(e,a){var t=a.value;return s(t)},onBlur:function(e){h(0,{name:e.target.name,value:e.target.value})},value:m})),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("b",null,"Autoren")),r.a.createElement("div",null,a.authors.map((function(e){return r.a.createElement(D.a,null,e.name)}))),r.a.createElement(k.a,{name:"author",placeholder:"Suche...",value:b,onChange:function(e,a){var t=a.value;return v(t)}}),""!==b&&r.a.createElement("div",null,g.map((function(e){return r.a.createElement(D.a,{onClick:function(){return n=e,void t(Object(o.a)({},a,{authors:[].concat(Object(i.a)(a.authors),[n])}));var n}},e.name)})))))}t(463);function M(e){var a=new Date(e),t=a.getDate(),n=a.getMonth()+1;return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:"".concat(t<10?"0"+t:t,".&#8202;").concat(n<10?"0"+n:n,".&#8202;").concat(a.getFullYear())}})}var T=function(){var e=h(),a=Object(n.a)(e,2),t=a[0],c=a[1],u=Object(l.useState)(),s=Object(n.a)(u,2),d=s[0],E=s[1],b=Object(l.useState)(),v=Object(n.a)(b,2),p=v[0],f=v[1],C=g(),O=Object(n.a)(C,1)[0],S=Object(l.useMemo)((function(){return p?O.reduce((function(e,a){for(var t in a.articles){var n=a.articles[t];if(n.id===p.id)return[].concat(Object(i.a)(e),[Object(o.a)({},a,{article:n})])}return e}),[]):null}),[O,p]);return r.a.createElement("div",{className:"articles-tab-container"},r.a.createElement(y.a,{onClick:function(){return E(Object(o.a)({},m,{id:t.length}))},primary:!0},"Neuer Artikel"),d&&r.a.createElement(j.a,{onClose:function(){return E()},open:!0},r.a.createElement(j.a.Header,null,"Artikel"),r.a.createElement(j.a.Content,null,r.a.createElement(H,{article:d,setArticle:E})),r.a.createElement(j.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return E()},content:"Abbrechen",negative:!0,icon:"close",labelPosition:"right"}),r.a.createElement(y.a,{onClick:function(){var e=Object(i.a)(t);e[d.id]=d,c(e),E()},content:"Speichern",primary:!0,icon:"check",labelPosition:"right"}))),p&&r.a.createElement(j.a,{onClose:function(){return f()},open:!0},r.a.createElement(j.a.Header,null,"Rechnungen"),r.a.createElement(j.a.Content,null,r.a.createElement(N.a,null,r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Rechnungsnummer"),r.a.createElement(N.a.HeaderCell,null,"Kunde"),r.a.createElement(N.a.HeaderCell,null,"Verkaufte Exemplare"),r.a.createElement(N.a.HeaderCell,null,"Umsatz"),r.a.createElement(N.a.HeaderCell,null,"Zahlungsdatum"))),r.a.createElement(N.a.Body,null,S.map((function(e){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.invoiceNumber),r.a.createElement(N.a.Cell,null,e.customer.name),r.a.createElement(N.a.Cell,null,e.article.amount),r.a.createElement(N.a.Cell,null,e.article.price),r.a.createElement(N.a.Cell,null,e.paymentDate?M(e.paymentDate):"Ausstehend"))})))))),r.a.createElement(N.a,{celled:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Id"),r.a.createElement(N.a.HeaderCell,null,"Name"),r.a.createElement(N.a.HeaderCell,null,"ISBN"),r.a.createElement(N.a.HeaderCell,null,"Menge"),r.a.createElement(N.a.HeaderCell,null,"Preis"),r.a.createElement(N.a.HeaderCell,null,"Autoren"),r.a.createElement(N.a.HeaderCell,null))),r.a.createElement(N.a.Body,null,t.map((function(e,a){return e&&r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.id),r.a.createElement(N.a.Cell,null,e.name),r.a.createElement(N.a.Cell,null,e.isbn),r.a.createElement(N.a.Cell,null,e.amount),r.a.createElement(N.a.Cell,null,e.price),r.a.createElement(N.a.Cell,null,e.authors.map((function(e){return r.a.createElement("p",null,e.name)}))),r.a.createElement(N.a.Cell,null,r.a.createElement(y.a,{onClick:function(){return E(e)},icon:"edit"}),r.a.createElement(y.a,{onClick:function(){return f(e)},icon:"list"}),r.a.createElement(y.a,{onClick:function(){return function(e){var a=Object(i.a)(t);a[e]=void 0,c(a)}(a)},icon:"trash"})))})))))},R=t(64),x=t(583),P=t(191),_=t(578),L=t(584),K=t(576),z=t(96),G=t.n(z),V=(t(464),t(465),t(190)),U={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Z={borderColor:"#2196f3"},Y={borderColor:"#00e676"},q={borderColor:"#ff1744"};function J(e){var a=e.onDrop,t=Object(V.b)({accept:"image/*"}),n=t.isDragActive,c=t.isDragAccept,i=t.isDragReject,u=Object(l.useMemo)((function(){return Object(o.a)({},U,{},n?Z:{},{},c?Y:{},{},i?q:{})}),[n,i,c]);return r.a.createElement(V.a,{onDrop:a},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",{className:"container"},r.a.createElement("div",a({style:u,onDrop:function(e){return e.stopPropagation()}}),r.a.createElement("input",t()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))}))}function W(e){var a=e.company,t=e.setCompany,c=e.selected,i=Object(l.useState)(b.a.createValueFromString(a.footerText,"html")),u=Object(n.a)(i,2),m=u[0],s=u[1],d=Object(l.useState)(b.a.createValueFromString(a.subjectAndBelow,"html")),E=Object(n.a)(d,2),v=E[0],p=E[1],f=Object(l.useState)(b.a.createValueFromString(a.invoiceText,"html")),g=Object(n.a)(f,2),h=g[0],C=g[1],O=Object(l.useState)(b.a.createValueFromString(a.contactInformation,"html")),j=Object(n.a)(O,2),N=j[0],w=j[1],B=Object(l.useState)(b.a.createValueFromString(a.aboveClientInvoiceAddress,"html")),A=Object(n.a)(B,2),D=A[0],H=A[1],M=function(e,n){t(Object(o.a)({},a,Object(S.a)({},e,n.toString("html"))))},T=function(e,n){var l=n.name,r=n.value;t(Object(o.a)({},a,Object(S.a)({},l,r)))};return r.a.createElement(I.a,null,"advancedSettings"===c&&r.a.createElement(I.a.Field,{label:"Firmename",control:k.a,name:"name",onChange:T,value:a.name}),"logo"===c&&r.a.createElement(P.a,null,r.a.createElement("h4",null,"Logo"),""!==a.logo?r.a.createElement("div",null,r.a.createElement("img",{src:a.logo,alt:"company logo"}),r.a.createElement(y.a,{negative:!0,onClick:function(){return t(Object(o.a)({},a,{logo:""}))}},"L\xf6schen")):r.a.createElement(J,{onDrop:function(e){var n=e[0],l=new FileReader;l.onload=function(e){t(Object(o.a)({},a,{logo:e.target.result}))},l.readAsDataURL(n)}})),"aboveClientInvoiceAddress"===c&&r.a.createElement(I.a.Field,{control:F,value:D,onChange:H,onBlur:function(){M("aboveClientInvoiceAddress",D)},label:"Absender",name:"aboveClientInvoiceAddress"}),"contactInformation"===c&&r.a.createElement(I.a.Field,{control:F,value:N,onChange:w,onBlur:function(){M("contactInformation",N)},label:"Kontakt Informationen",name:"contactInformation"}),"subjectAndBelow"===c&&r.a.createElement(I.a.Field,{control:F,value:v,onChange:p,onBlur:function(){M("subjectAndBelow",v)},label:"Betreff und Begr\xfc\xdfung",name:"subjectAndBelow"}),"invoiceText"===c&&r.a.createElement(I.a.Field,{control:F,value:h,onChange:C,onBlur:function(){M("invoiceText",h)},label:"Rechnungstext",name:"invoiceText"}),"footerText"===c&&r.a.createElement(I.a.Field,{control:F,value:m,onChange:function(e){s(e)},onBlur:function(){M("footerText",m)},label:"Fu\xdfzeile",name:"footerText"}),"advancedSettings"===c&&r.a.createElement(I.a.Field,{label:"Farbe",control:k.a,placeholder:"z.B. #ffffff oder rgb(120,0,0)",name:"companyColor",onChange:T,value:a.color}))}var Q=function(e){var a=e.invoice,t=e.setInvoice,c=e.formSelected,d=void 0===c?[]:c,E=e.wrapperClass,b=e.setFormSelected,v=O(),p=Object(n.a)(v,2),g=p[0],h=(p[1],f()),C=Object(n.a)(h,2),N=C[0],F=C[1],B=Object(l.useState)(g[a.customer.id]||a.customer),A=Object(n.a)(B,2),D=A[0],M=A[1],T=u("articles",[]),R=Object(n.a)(T,2),z=R[0],V=R[1],U=Object(l.useState)(a.articles),Z=Object(n.a)(U,2),Y=Z[0],q=Z[1],J=Object(l.useState)(Object(o.a)({},m,{id:z.length})),Q=Object(n.a)(J,2),X=Q[0],$=Q[1],ee=Object(l.useState)(1),ae=Object(n.a)(ee,2),te=ae[0],ne=ae[1],le=Object(l.useState)(1),re=Object(n.a)(le,2),ce=re[0],oe=re[1],ie=Object(l.useState)(void 0),ue=Object(n.a)(ie,2),me=ue[0],se=ue[1],de=Object(l.useState)(a.porto),Ee=Object(n.a)(de,2),be=Ee[0],ve=Ee[1];Object(l.useEffect)((function(){t(Object(o.a)({},a,{customer:D,articles:Y.map((function(e){return Object(o.a)({},z[e.articleId],{},e)})),company:N}))}),[D,Y,N]);var pe=function(e,n){var l=n.name,r=n.value,c=n.checked;if("porto"===l){if(r=parseFloat(r),isNaN(r))return void ve("");r=r.toFixed(2),ve(r)}"payed"===l&&(r=c),t(Object(o.a)({},a,Object(S.a)({},l,r)))},fe=function(){return se(!me)},ge=function(e,n){t(Object(o.a)({},a,Object(S.a)({},n,e.toString())))},he=Object(l.useMemo)((function(){return[{key:g.length,value:g.length,text:"Neuer Kunde"}].concat(g.map((function(e){return{key:e.id,text:e.name,value:e.id}})))}),[g,D]),Ce=Object(l.useMemo)((function(){return[{key:z.length,value:z.length,text:""}].concat(z.map((function(e){return{key:e.id,value:e.id,text:e.name}})))}),[z]),Oe=function(e,a,t){if(e>=Y.length){if(t>=z.length)return;q([].concat(Object(i.a)(Y),[{toBeSend:ce,toBePayed:te,articleId:t}])),oe(1),ne(1)}else{if("articleId"===a&&t>=z.length)return void q(Y.filter((function(a,t){return t!==e})));var n=Object(i.a)(Y);n[e][a]=t,q(n)}};return r.a.createElement("div",{className:E},r.a.createElement("div",{className:"invoice-form "},"customer"===d[0]&&r.a.createElement(j.a,{open:!0,onClose:function(){return b([])}},r.a.createElement("div",{className:"invoice-form-wrap"},r.a.createElement(I.a,null,r.a.createElement(I.a.Field,{label:"W\xe4hlen Sie einen Kunden aus:",control:x.a,search:!0,selection:!0,options:he,value:D.id,onChange:function(e,a){var t=a.value;t<g.length?M(g[t]):M(Object(o.a)({},s,{id:g.length}))}})),r.a.createElement(P.a,null,r.a.createElement(w,{customer:D,setCustomer:M})))),r.a.createElement(_.a,null,r.a.createElement(L.a,{fluid:!0},r.a.createElement(L.a.Content,null,r.a.createElement("div",{className:"invoice-form-wrap"},r.a.createElement("div",null,r.a.createElement(I.a,null,Y.length>0&&r.a.createElement("div",null,r.a.createElement("h3",null,"Artikel in der Rechnung"),Y.map((function(e,a){return r.a.createElement("div",null,r.a.createElement(I.a.Group,{widths:"equal"},r.a.createElement(I.a.Input,{fluid:!0,name:"toBeSend",type:"number",label:"Zu Senden",value:e.toBeSend,onChange:function(e,t){var n=t.value,l=t.name;return Oe(a,l,n)}}),r.a.createElement(I.a.Input,{fluid:!0,name:"toBePayed",type:"number",label:"Zu Bezahlen",value:e.toBePayed,onChange:function(e,t){var n=t.value,l=t.name;return Oe(a,l,n)}}),r.a.createElement(I.a.Field,{control:x.a,fluid:!0,label:"Artikel",name:"articleId",search:!0,selection:!0,options:Ce,value:e.articleId,onChange:function(e,t){var n=t.value,l=t.name;return Oe(a,l,n)}})))})),r.a.createElement("hr",null)),r.a.createElement("h3",null,"Artikel hinzuf\xfcgen"),r.a.createElement(I.a.Group,{widths:"equal"},r.a.createElement(I.a.Input,{fluid:!0,name:"amount",type:"number",label:"Zu Senden",value:ce,onChange:function(e,a){var t=a.value;return oe(t)}}),r.a.createElement(I.a.Input,{fluid:!0,name:"amountPayed",type:"number",label:"Zu Bezahlen",value:te,onChange:function(e,a){var t=a.value;return ne(t)}}),r.a.createElement(I.a.Field,{control:x.a,fluid:!0,label:"Artikel",name:"articleId",search:!0,selection:!0,options:Ce,value:X.id,onChange:function(e,a){var t=a.value;return Oe(Y.length,"articleId",t)}}))),r.a.createElement(y.a,{onClick:fe},"Neuen Artikel Anlegen")),r.a.createElement(j.a,{open:me,onClose:fe},r.a.createElement(j.a.Header,null,"Neuer Artikel"),r.a.createElement(j.a.Content,null,r.a.createElement(H,{article:X,setArticle:$})),r.a.createElement(j.a.Actions,null,r.a.createElement(y.a,{onClick:fe,content:"Abbrechen",negative:!0,icon:"close",labelPosition:"right"}),r.a.createElement(y.a,{onClick:function(){V([].concat(Object(i.a)(z),[X])),$(Object(o.a)({},m,{id:z.length+1})),fe()},content:"Anlegen",primary:!0,icon:"check",labelPosition:"right"})))))),"general"===d[0]&&r.a.createElement(j.a,{open:!0,onClose:function(){return b([])}},r.a.createElement("div",{className:"invoice-form-wrap"},r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{fluid:!0,widths:"equal"},"invoiceDate"===d[1]&&r.a.createElement(I.a.Field,{label:"Rechnungsdatum",name:"invoiceDate",selected:new Date(a.invoiceDate),onChange:function(e){return ge(e,"invoiceDate")},control:G.a,dateFormat:"dd/MM/yyyy"}),"orderDate"===d[1]&&r.a.createElement(I.a.Field,{label:"Bestelldatum",name:"orderDate",selected:new Date(a.orderDate),onChange:function(e){return ge(e,"orderDate")},control:G.a,dateFormat:"dd/MM/yyyy"}),"shippingDate"===d[1]&&r.a.createElement(I.a.Field,{label:"Versanddatum",name:"shippingDate",selected:new Date(a.shippingDate),onChange:function(e){return ge(e,"shippingDate")},control:G.a,dateFormat:"dd/MM/yyyy"})),r.a.createElement(I.a.Group,{fluid:!0,widths:"equal"},"porto"===d[1]&&r.a.createElement(I.a.Field,{label:"Porto",value:be,name:"porto",onChange:function(e,a){var t=a.value;return ve(t)},control:k.a,onBlur:function(e){return pe(0,{name:e.target.name,value:e.target.value})},icon:"euro"}),"invoiceNumber"===d[1]&&r.a.createElement(I.a.Field,{label:"Rechnungsnummer",name:"invoiceNumber",value:a.invoiceNumber,onChange:pe,control:k.a})),"payed"===d[1]&&r.a.createElement("div",null,r.a.createElement(I.a.Field,null,r.a.createElement("label",null,"Bezahlt"),r.a.createElement(K.a,{onChange:function(e,n){var l,r,c=n.name,i=n.checked;i?t(Object(o.a)({},a,(l={},Object(S.a)(l,c,i),Object(S.a)(l,"paymentDate",new Date),l))):t(Object(o.a)({},a,(r={},Object(S.a)(r,c,i),Object(S.a)(r,"paymentDate",void 0),r)))},name:"payed",checked:a.payed,toggle:!0})),a.payed&&r.a.createElement(I.a.Field,{label:"Zahlungseingangsdatum",name:"paymentDate",selected:new Date(a.paymentDate),onChange:function(e){return ge(e,"paymentDate")},control:G.a,dateFormat:"dd/MM/yyyy"}))),r.a.createElement(W,{company:N,setCompany:F,selected:d[1]}))))))},X=t(289),$=t.n(X),ee=t(290),ae=t.n(ee),te=function(e){var a=e.id,t=(e.label,e.fileName);return r.a.createElement(y.a,{primary:!0,onClick:function(){var e=document.getElementById(a);$()(e,{scale:2}).then((function(e){var a=e.toDataURL("image/png",1),n=new ae.a;n.addImage(a,"PNG",0,0,210,297),n.save("".concat(t,".pdf"))}))},icon:"download",labelPosition:"right",content:"Download"})},ne=function(e){var a=e.children,t=e.singleMode,n=e.id;return r.a.createElement("div",{id:n,className:"bg-white shadow-1 center",style:{width:"210mm",height:t?"297mm":""}},a)};t(555);function le(e){var a=e.onClick,t=e.wrapperClass,n=e.children;return r.a.createElement("div",{className:"".concat(t||""," invoice-overlay-wrapper")},n,r.a.createElement("div",{className:"invoice-overlay",onClick:a}))}var re=function(e){var a=e.id,t=e.invoice,n=t.orderDate,l=t.invoiceDate,c=t.shippingDate,o=t.invoiceNumber,i=t.porto,u=t.customer,m=t.articles,s=void 0===m?[]:m,d=t.company,E=(e.invoice,e.setInvoice,e.setFormSelected),b=s.map((function(e){var a=e.price*e.toBePayed;return(a-a*(u.discount/100))/(1+u.ust/100)})).reduce((function(e,a){return parseFloat(a)+e}),0);return u?r.a.createElement(ne,{singleMode:!0,id:a},r.a.createElement("div",{className:"invoice-folding-line",style:d.companyColor?{borderColor:d.companyColor}:{}}),r.a.createElement("div",{className:"invoice-page-pdf"},r.a.createElement("div",{className:"invoice-page-top"},r.a.createElement(le,{onClick:function(){return E(["general","logo"])}},r.a.createElement("div",{className:"invoice-page-image-wrapper"},r.a.createElement("img",{className:"invoice-header-company-logo",src:d.logo,alt:"company logo"}))),r.a.createElement("div",{className:"invoice-header"},r.a.createElement("div",{className:"invoice-header-customer-address"},r.a.createElement(le,{wrapperClass:"invoice-header-customer-company",onClick:function(){return E(["general","aboveClientInvoiceAddress"])}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.aboveClientInvoiceAddress}})),u?r.a.createElement(le,{wrapperClass:"invoice-header-customer-info",onClick:function(){return E(["customer"])}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:u.invoiceAddress}})):r.a.createElement(y.a,null,"Kunde hinzuf\xfcgen")),r.a.createElement(le,{wrapperClass:"invoice-header-company-info",onClick:function(){return E(["general","contactInformation"])}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.contactInformation}})))),r.a.createElement("div",{className:"invoice-body"},r.a.createElement("div",{className:"invoice-body-top"},r.a.createElement("div",{className:"invoice-subject"},r.a.createElement(le,{wrapperClass:"invoice-subject-and-below",onClick:function(){return E(["general","subjectAndBelow"])}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.subjectAndBelow}})),r.a.createElement("div",{className:"invoice-body-subject-key-values"},r.a.createElement("div",{className:"invoice-body-subject-keys"},r.a.createElement("div",{className:"invoice-body-order-date"},r.a.createElement("p",null,r.a.createElement("b",null,"Bestelldatum:"))),r.a.createElement("div",{className:"invoice-body-send-date"},r.a.createElement("p",null,r.a.createElement("b",null,"Versanddatum:"))),r.a.createElement("div",{className:"invoice-body-send-to"},r.a.createElement("p",null,r.a.createElement("b",null,"Versand an:")))),r.a.createElement("div",{className:"invoice-body-subject-values"},r.a.createElement(le,{onClick:function(){return E(["general","orderDate"])},wrapperClass:"invoice-body-order-date"},r.a.createElement("p",null,r.a.createElement("b",null,M(n)))),r.a.createElement(le,{onClick:function(){return E(["general","shippingDate"])},wrapperClass:"invoice-body-send-date"},r.a.createElement("p",null,r.a.createElement("b",null,M(c)))),r.a.createElement(le,{onClick:function(){return E(["customer"])}},r.a.createElement("div",{className:"invoice-body-send-to",dangerouslySetInnerHTML:{__html:u.shippingAddress}}))))),r.a.createElement("div",{className:"invoice-body-invoice-date"},r.a.createElement(le,{onClick:function(){return E(["general","invoiceDate"])}},r.a.createElement("div",{className:"invoice-body-top-right"},r.a.createElement("p",null,"Rechnungsdatum: ",r.a.createElement("b",null,M(l))))),r.a.createElement(le,{onClick:function(){return E(["general","invoiceNumber"])}},r.a.createElement("div",{className:"invoice-body-invoice-nr"},r.a.createElement("p",null,"Rechnungsnummer: ",r.a.createElement("b",null,o)))),r.a.createElement("div",{className:"invoice-body-invoice-hint"},r.a.createElement("p",null,"(Bitte bei Zahlung angeben)")))),r.a.createElement("div",{className:"invoice-body-bottom"},r.a.createElement("div",{className:"invoice-body-article-wrapper"},s.map((function(e){var a=e.toBePayed,t=e.toBeSend,n=e.price,l=e.name,c=e.isbn,o=parseInt(a)>1,i=n*a,m=i-i*(u.discount/100),d=m/(1+u.ust/100);return r.a.createElement("div",{className:"invoice-body-article"},r.a.createElement("div",{className:"invoice-body-article-left"},r.a.createElement("div",{className:"invoice-body-article-description"},r.a.createElement("div",null,r.a.createElement("b",null,a!==t&&t+"/",a," Exemplar",o&&"e")),r.a.createElement("div",{className:"invoice-body-article-title"},r.a.createElement("b",null,l&&"\u201e".concat(l,"\u201c,"))),r.a.createElement("div",{className:"invoice-body-article-title"},c&&"".concat(c,","))),r.a.createElement("div",{className:"invoice-body-artivle-price-calc"},"Preis ".concat(o?"je":""," ").concat(n," \u20ac").concat(o?" = ".concat(i.toFixed(2),"\u20ac"):"").concat(u.discount>0?", abz\xfcglich ".concat(u.discount," % Rabatt = ").concat(m.toFixed(2)," \u20ac"):""," (beinhaltet ").concat(u.ust," % MwST = ").concat((m-d).toFixed(2),")"))),r.a.createElement("div",{className:"invoice-body-article-price"},r.a.createElement("b",null,s.length>1&&"".concat(d.toFixed(2)," \u20ac"))))}))),r.a.createElement("div",{className:"invoice-body-price-calculation"},r.a.createElement("div",{className:"invoice-body-price-calculation-label-and-number"},r.a.createElement("p",null,"Netto"),r.a.createElement("p",null,r.a.createElement("b",null,b.toFixed(2)," \u20ac"))),r.a.createElement(le,{onClick:function(){return E(["general","porto"])}},r.a.createElement("div",{className:"invoice-body-price-calculation-label-and-number"},r.a.createElement("p",null,"Versandkosten"),r.a.createElement("p",null,r.a.createElement("b",null,i," \u20ac")))),r.a.createElement(le,{onClick:function(){return E(["customer"])}},r.a.createElement("div",{className:"invoice-body-price-calculation-label-and-number"},r.a.createElement("p",null,"+".concat(u.ust,"% Mehrwertsteuer")),r.a.createElement("p",null,r.a.createElement("b",null,((b+parseFloat(i))*parseFloat(u.ust)/100).toFixed(2)," ","\u20ac"))))),r.a.createElement("div",{className:"invoice-body-price"},r.a.createElement("p",null,"Rechnungsbetrag"),r.a.createElement("p",null,r.a.createElement("b",null,((b+parseFloat(i))*(1+parseFloat(u.ust)/100)).toFixed(2)," ","\u20ac"))),r.a.createElement(le,{onClick:function(){return E(["general","invoiceText"])}},r.a.createElement("div",null,r.a.createElement("p",{className:"invoice-body-final-text",dangerouslySetInnerHTML:{__html:d.invoiceText}}))))),r.a.createElement(le,{onClick:function(){return E(["general","footerText"])}},r.a.createElement("div",{className:"invoice-footer",style:d.companyColor?{borderColor:d.companyColor}:{},dangerouslySetInnerHTML:{__html:d.footerText}})))):null},ce=(t(556),function(e){var a=e.edit,t=e.invoice,c=e.setInvoice,o=e.invoices,u=e.setInvoices;if(console.log(a,o,t),!t||!o)return null;var m=Object(l.useState)(a),s=Object(n.a)(m,2),d=s[0],E=s[1],b=Object(l.useState)([]),v=Object(n.a)(b,2),p=v[0],f=v[1],g=O(),h=Object(n.a)(g,2),C=h[0],j=h[1],N=t.id===o.length;return r.a.createElement("div",{className:"invoice-page"},d&&r.a.createElement(Q,{wrapperClass:"invoice-form-wrapper",invoice:t,setInvoice:c,setInvoices:u,formSelected:p,setFormSelected:f}),r.a.createElement("div",{className:"invoice-page-wrapper"},r.a.createElement("h1",null,N?"Neue Rechnung erstellen":"Rechnung Bearbeiten"),r.a.createElement("p",null,"Klicken Sie auf den Bereich den Sie anpassen wollen."),d?r.a.createElement("div",{className:"invoice-page-button-container"},r.a.createElement("div",null,r.a.createElement(te,{id:"singlePage",label:"Rechnung Herunterladen",fileName:t.invoiceNumber})),r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return c()},content:"Abbrechen",negative:!0,icon:"close",labelPosition:"right"}),t.customer&&r.a.createElement(y.a,{onClick:function(){t.totalPrice=function(e){return e.articles.map((function(a){var t=a.price*a.toBePayed;return t-t*(e.customer.discount/100)})).reduce((function(e,a){return a+e}),0)}(t);var e=Object(i.a)(o);e[t.id]=t,u(e),c();var a=Object(i.a)(C);a[t.customer.id]=t.customer,j(a)},content:N?"Anlegen":"Speichern",positive:!0,icon:"check",labelPosition:"right"}))):r.a.createElement("div",{className:"invoice-button-wrapper"},r.a.createElement(y.a,{onClick:function(){return E(!0)},primary:!0},"Neue Rechnung erstellen")),r.a.createElement(re,{id:"singlePage",invoice:t,setInvoice:c,setFormSelected:f})))}),oe=function(){var e=g(),a=Object(n.a)(e,2),t=a[0],c=a[1],i=Object(l.useState)(),u=Object(n.a)(i,2),m=u[0],E=u[1],b=f(),v=Object(n.a)(b,1)[0],p=O(),h=Object(n.a)(p,1)[0];return m?r.a.createElement(ce,{edit:!0,invoice:m,setInvoice:E,setInvoices:c,invoices:t}):r.a.createElement("div",{className:"invoice-tab-container"},r.a.createElement(y.a,{onClick:function(){return E(Object(o.a)({},d,{id:t.length,customer:Object(o.a)({},s,{id:h.length}),company:v}))},primary:!0},"Neue Rechnung"),r.a.createElement(N.a,{celled:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Rechnungsnummer"),r.a.createElement(N.a.HeaderCell,null,"Rechnungsdatum"),r.a.createElement(N.a.HeaderCell,null,"Kunde"),r.a.createElement(N.a.HeaderCell,null,"Artikel"),r.a.createElement(N.a.HeaderCell,null,"Gesamtpreis"),r.a.createElement(N.a.HeaderCell,null,"Zahlungseingang"),r.a.createElement(N.a.HeaderCell,null))),r.a.createElement(N.a.Body,null,t.map((function(e){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.invoiceNumber),r.a.createElement(N.a.Cell,null,M(e.invoiceDate)),r.a.createElement(N.a.Cell,null,e.customer.name),r.a.createElement(N.a.Cell,null,e.articles.map((function(e){return r.a.createElement("p",null,e.name)}))),r.a.createElement(N.a.Cell,null,e.totalPrice.toFixed(2),"\u20ac"),r.a.createElement(N.a.Cell,null,e.paymentDate?M(e.paymentDate):"Ausstehend"),r.a.createElement(N.a.Cell,null,r.a.createElement(y.a,{icon:!0,onClick:function(){return E(e)}},r.a.createElement(R.a,{name:"eye"}))))})))))};function ie(e){var a=e.author,t=e.setAuthor,c=Object(l.useState)(a.percent),i=Object(n.a)(c,2),u=i[0],m=i[1],s=function(e,n){var l=n.name,r=n.value;if("percent"===l){if(r=parseFloat(r),isNaN(r))return void m("");r=r.toFixed(2),m(r)}t(Object(o.a)({},a,Object(S.a)({},l,r)))};return r.a.createElement(I.a,null,r.a.createElement(I.a.Group,{width:"equal"},r.a.createElement(I.a.Field,{id:"form-input-control-name",control:k.a,label:"Name",placeholder:"Name",name:"name",onChange:s,value:a.name}),r.a.createElement(I.a.Field,{id:"form-input-control-name",control:k.a,label:"Kontakt",placeholder:"Tel, Email, ...",onChange:s,name:"contact",value:a.contact})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Field,{id:"form-input-control-last-name",control:k.a,label:"Prozent",placeholder:"Prozent",name:"percent",icon:"percent",onChange:function(e,a){var t=a.value;return m(t)},onBlur:function(e){s(0,{name:e.target.name,value:e.target.value})},value:u})))}function ue(){var e=C(),a=Object(n.a)(e,2),t=a[0],c=a[1],o=Object(l.useState)(),u=Object(n.a)(o,2),m=u[0],s=u[1];return r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return s({authorSceleton:p,id:t.length})},primary:!0},"Neuer Autor"),m&&r.a.createElement(j.a,{onClose:function(){return s()},open:!0},r.a.createElement(j.a.Header,null,"Author"),r.a.createElement(j.a.Content,null,r.a.createElement(ie,{author:m,setAuthor:s})),r.a.createElement(j.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return s()},content:"Abbrechen",negative:!0,icon:"close",labelPosition:"right"}),r.a.createElement(y.a,{onClick:function(e){var a=Object(i.a)(t);a[m.id]=m,c(a),s()},content:"Speichern",primary:!0,icon:"check",labelPosition:"right"}))),r.a.createElement(N.a,{celled:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Id"),r.a.createElement(N.a.HeaderCell,null,"Name"),r.a.createElement(N.a.HeaderCell,null,"Kontakt"),r.a.createElement(N.a.HeaderCell,null,"Prozent"),r.a.createElement(N.a.HeaderCell,null))),r.a.createElement(N.a.Body,null,t.map((function(e,a){return e&&r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.id),r.a.createElement(N.a.Cell,null,e.name),r.a.createElement(N.a.Cell,null,e.contact),r.a.createElement(N.a.Cell,null,e.percent," %"),r.a.createElement(N.a.Cell,null,r.a.createElement(y.a,{onClick:function(){return s(e)},icon:"eye"}),r.a.createElement(y.a,{onClick:function(){return function(e){var a=Object(i.a)(t);a[e]=void 0,c(a)}(a)},icon:"delete"})))})))))}function me(){var e=h(),a=Object(n.a)(e,2),t=a[0];(0,a[1])(t.map((function(e){return Object(o.a)({},e,{authors:[]})})))}var se=function(){return function(e,a){var t=u("version","1"),l=Object(n.a)(t,2),r=l[0],c=l[1];parseInt(r)<a&&e(),c(a)}(me,2)};function de(){se()}function Ee(){var e=f(),a=Object(n.a)(e,1)[0],t=O(),c=Object(n.a)(t,1)[0],i=Object(l.useState)(Object(o.a)({},d,{id:0,customer:Object(o.a)({},s,{id:c.length}),company:a})),u=Object(n.a)(i,2),m=u[0],E=u[1],b=g(),v=Object(n.a)(b,2),p=v[0],h=v[1];return r.a.createElement(ce,{invoice:m,setInvoice:E,setInvoices:h,invoices:p})}Object(c.render)(r.a.createElement((function(){de();var e=g(),a=Object(n.a)(e,1)[0];return a?0===a.length?r.a.createElement(Ee,null):r.a.createElement("div",{className:"invoice-app-container"},r.a.createElement(A.a,{panes:[{menuItem:"Rechnungen",render:function(){return r.a.createElement("div",{className:""},r.a.createElement(oe,null))}},{menuItem:"Kunden",render:function(){return r.a.createElement("div",{className:""},r.a.createElement(B,null))}},{menuItem:"Artikel",render:function(){return r.a.createElement("div",{className:""},r.a.createElement(T,null))}},{menuItem:"Autoren",render:function(){return r.a.createElement("div",{className:""},r.a.createElement(ue,null))}}]})):null}),null),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.c71200a8.chunk.js.map