(this["webpackJsonpreact-4798tj"]=this["webpackJsonpreact-4798tj"]||[]).push([[9],{829:function(e,t,n){"use strict";var a=n(11),r=n(0),c=n.n(r),l=n(823),o=n(266),i=n(6),u=n.n(i),s=(n(40),n(4)),m=n.n(s),d=(n(1),n(26)),b=n(135),p=n(136),f=n(8),h=n(100),v=n(414),O=n(137);function j(e){var t=e.children,n=e.className,a=e.content,r=m()("sub header",n),l=Object(b.a)(j,e),o=Object(p.a)(j,e);return c.a.createElement(o,u()({},l,{className:r}),f.a.isNil(t)?a:t)}j.handledProps=["as","children","className","content"],j.propTypes={},j.create=Object(O.e)(j,(function(e){return{content:e}}));var E=j;function g(e){var t=e.children,n=e.className,a=e.content,r=m()("content",n),l=Object(b.a)(g,e),o=Object(p.a)(g,e);return c.a.createElement(o,u()({},l,{className:r}),f.a.isNil(t)?a:t)}g.handledProps=["as","children","className","content"],g.propTypes={};var y=g;function C(e){var t=e.attached,n=e.block,a=e.children,r=e.className,l=e.color,o=e.content,i=e.disabled,s=e.dividing,O=e.floated,j=e.icon,g=e.image,w=e.inverted,k=e.size,x=e.sub,N=e.subheader,R=e.textAlign,S=m()("ui",l,k,Object(d.a)(n,"block"),Object(d.a)(i,"disabled"),Object(d.a)(s,"dividing"),Object(d.d)(O,"floated"),Object(d.a)(!0===j,"icon"),Object(d.a)(!0===g,"image"),Object(d.a)(w,"inverted"),Object(d.a)(x,"sub"),Object(d.b)(t,"attached"),Object(d.c)(R),"header",r),A=Object(b.a)(C,e),D=Object(p.a)(C,e);if(!f.a.isNil(a))return c.a.createElement(D,u()({},A,{className:S}),a);var I=h.a.create(j,{autoGenerateKey:!1}),P=v.a.create(g,{autoGenerateKey:!1}),H=E.create(N,{autoGenerateKey:!1});return I||P?c.a.createElement(D,u()({},A,{className:S}),I||P,(o||H)&&c.a.createElement(y,null,o,H)):c.a.createElement(D,u()({},A,{className:S}),o,H)}C.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],C.propTypes={},C.Content=y,C.Subheader=E;var w=C;function k(e){var t=e.onDelete,n=e.type,i=Object(r.useState)(!1),u=Object(a.a)(i,2),s=u[0],m=u[1];return c.a.createElement(l.a,Object.assign({},e,{basic:!0,size:"small",trigger:c.a.createElement(o.a,{negative:!0,icon:"trash",onClick:function(){return m(!0)}}),open:s,onClose:function(){return m(!1)}}),c.a.createElement(w,{icon:"trash",content:"".concat(n," l\xf6schen")}),c.a.createElement(l.a.Content,null,c.a.createElement("p",null,"Bist du dir sicher, dass du dieses Element l\xf6schen willst?")),c.a.createElement(l.a.Actions,null,c.a.createElement(o.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return m(!1)}},c.a.createElement(h.a,{name:"remove"})," Nein"),c.a.createElement(o.a,{color:"green",inverted:!0,onClick:function(){t(),m(!1)}},c.a.createElement(h.a,{name:"checkmark"})," Ja")))}n.d(t,"a",(function(){return k}))},837:function(e,t,n){"use strict";n.r(t);var a=n(29),r=n(16),c=n(5),l=n.n(c),o=n(12),i=n(11),u=n(0),s=n.n(u),m=n(27),d=n(266),b=n(825),p=n(87),f=n(821),h=n(24),v=n(381),O=n(32),j=n(269),E=n(272),g=n(138),y=n.n(g),C=n(341),w=n(18),k=n(38),x=Object(w.a)().backendURL+"/email/invoice";function N(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)(x,t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)(t);case 2:a=e.sent,c=a.output("datauristring"),N(Object(r.a)({data:c},n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=n(823),I=n(61),P=n(39),H=n.n(P);function M(e){var t=e.invoice,n=e.setInvoice,c=e.onSend,l=Object(u.useState)({to:"",fileName:t.invoiceNumber}),o=Object(i.a)(l,2),m=o[0],b=o[1],f=Object(u.useState)(!1),h=Object(i.a)(f,2),v=h[0],O=h[1],j=Object(u.useState)(H.a.createValueFromString("<b>Versandadresse des Kunden</b><br/>"+t.customer.shippingAddress,"html")),E=Object(i.a)(j,2),g=E[0],y=E[1];return s.a.createElement(D.a,{open:!0,onClose:function(){return n()}},s.a.createElement(D.a.Header,null,"Rechnungs-PDF per Email Verschicken"),s.a.createElement(D.a.Content,null,s.a.createElement(p.a,null,s.a.createElement(p.a.Input,{label:"An",name:"to",value:m.to,placeholder:"max-mustermann@email.de",onChange:function(e,t){var n=t.name,c=t.value;return b(Object(r.a)({},m,Object(a.a)({},n,c)))}}),s.a.createElement(p.a.Input,{label:"Rechnungsdateiname",name:"fileName",value:m.fileName,onChange:function(e,t){var n=t.name,c=t.value;return b(Object(r.a)({},m,Object(a.a)({},n,c)))}}),s.a.createElement(p.a.Field,{label:"Emailtext",name:"text",value:g,control:I.a,onChange:y}))),s.a.createElement(D.a.Actions,null,s.a.createElement(d.a,{negative:!0,icon:"close",labelPosition:"right",content:"Abbrechen",onClick:function(){return n()}}),s.a.createElement(d.a,{primary:!0,icon:"send",labelPosition:"right",content:"Senden",onClick:function(){O(!0),c(Object(r.a)({text:g.toString("html")},m))},loading:v})))}var G=n(829);function T(e,t,n,a){if(void 0===n&&(n=function(){}),void 0===a&&(a={}),!e)throw new Error("Target element to observe should be a valid DOM Node");var r=Object.assign({},{viewport:null,modTop:"0px",modRight:"0px",modBottom:"0px",modLeft:"0px",threshold:[0]},a),c=r.viewport,l=r.modTop,o=r.modLeft,i=r.modBottom,u=r.modRight,s=r.threshold;if(!Array.isArray(s)&&"number"!=typeof s)throw new Error("threshold should be a number or an array of numbers");var m=Array.isArray(s)?s.map((function(e){return Math.floor(e%101)/100})):[Math.floor(s?s%101:0)/100],d=Math.min.apply(Math,m),b={root:c instanceof Node?c:null,rootMargin:l+" "+u+" "+i+" "+o,threshold:m},p=new IntersectionObserver((function(a,r){var c=a.filter((function(t){return t.target===e}))[0],l=function(){return r.unobserve(e)};c&&(c.isInViewport=c.isIntersecting&&c.intersectionRatio>=d,c.isInViewport?t(c,l,e):n(c,l,e))}),b);return p.observe(e),function(){return p.unobserve(e)}}function B(e){return"object"==typeof e&&"current"in e}function F(e){return"function"==typeof e&&"function"==typeof e.call}var K=function(){var e=Object(m.g)(),t=Object(i.a)(e,8),n=t[0],c=t[2],g=t[3],C=t[6],w=t[7],k=Object(u.useState)(),x=Object(i.a)(k,2),N=x[0],R=x[1],A=Object(u.useState)(),D=Object(i.a)(A,2),I=D[0],P=D[1],H=function(e){void 0===e&&(e={});var t=Object(u.useState)(null),n=t[0],a=t[1],r=e.target,c=e.viewport,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["target","viewport"]),o=Object(u.useRef)(null),i=Object(u.useRef)(null),s=Object(u.useCallback)((function(e){o.current=e,c&&(F(c)?c(e):B(c)&&(c.current=e))}),[o,c]),m=Object(u.useCallback)((function(e){i.current=e,r&&(F(r)?r(e):B(r)&&(r.current=e))}),[i,r]);return Object(u.useEffect)((function(){if(i.current)return T(i.current,(function(){return a(!0)}),(function(){return a(!1)}),Object.assign({},l,{viewport:o.current}))}),[i.current,l,o]),[n,m,s]}({}),K=Object(i.a)(H,2),L=K[0],V=K[1];Object(u.useEffect)((function(){L&&!C&&w()}),[L,C,w]),Object(m.f)();var z=Object(O.f)(),J=Object(O.i)().path;function _(){return(_=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("singlePage",t);case 2:P();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){N&&function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.e)("singlePage",N.invoiceNumber);case 2:R();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[N]),s.a.createElement(O.c,null,s.a.createElement(O.a,{exact:!0,path:J},s.a.createElement("div",{className:"invoice-tab-container"},s.a.createElement(d.a,{onClick:function(){return z.push("".concat(J,"/new"))},primary:!0},"Neue Rechnung"),s.a.createElement(b.a,{celled:!0},s.a.createElement(b.a.Header,null,s.a.createElement(b.a.Row,null,s.a.createElement(b.a.HeaderCell,null,"Rechnungsnummer"),s.a.createElement(b.a.HeaderCell,null,"Rechnungsdatum"),s.a.createElement(b.a.HeaderCell,null,"Kunde"),s.a.createElement(b.a.HeaderCell,null,"Gesamtpreis"),s.a.createElement(b.a.HeaderCell,null,"Zahlungseingang"),s.a.createElement(b.a.HeaderCell,null))),s.a.createElement(b.a.Body,null,n.map((function(e){return s.a.createElement(b.a.Row,{key:e._id},s.a.createElement(b.a.Cell,null,e.invoiceNumber),s.a.createElement(b.a.Cell,null,Object(h.b)(e.invoiceDate)),s.a.createElement(b.a.Cell,null,e.customer.name),s.a.createElement(b.a.Cell,null,Object(h.c)(e.totalPrice)," \u20ac"),s.a.createElement(b.a.Cell,null,s.a.createElement(p.a,{style:{marginBottom:0}},s.a.createElement(p.a.Group,{style:{display:"flex",alignItems:"center",margin:"0"}},s.a.createElement(f.a,{onChange:function(t,n){var c,l,o=n.name,i=n.checked;i?g(Object(r.a)({},e,(c={},Object(a.a)(c,o,i),Object(a.a)(c,"paymentDate",new Date),c))):g(Object(r.a)({},e,(l={},Object(a.a)(l,o,i),Object(a.a)(l,"paymentDate",void 0),l)))},name:"payed",checked:e.payed,toggle:!0}),e.payed&&e.paymentDate?s.a.createElement(p.a.Field,{selected:new Date(e.paymentDate),onChange:function(t){return g(Object(r.a)({},e,{paymentDate:t}))},control:y.a,dateFormat:"dd/MM/yyyy",transparent:!0}):s.a.createElement("span",{style:{marginLeft:"0.5em"}},"Ausstehend")))),s.a.createElement(b.a.Cell,{style:{}},s.a.createElement(d.a,{primary:!0,icon:"edit",onClick:function(){return z.push("".concat(J,"/").concat(e._id))}}),s.a.createElement(d.a.Group,null,s.a.createElement(d.a,{secondary:!0,icon:"download",onClick:function(){return R(e)}}),s.a.createElement(d.a,{style:{borderLeft:"1px solid white",marginRight:"2px"},secondary:!0,icon:"mail",onClick:function(){return P(e)}}))," ",s.a.createElement(G.a,{onDelete:function(){return c(e._id)},type:"Rechnung"})))})))),s.a.createElement("div",{ref:V,style:{height:"20px"}}),s.a.createElement("div",{style:{position:"absolute",opacity:"0.0"}},(N||I)&&s.a.createElement(v.a,{id:"singlePage",invoice:N||I})),I&&s.a.createElement(M,{invoice:I,setInvoice:P,onSend:function(e){return _.apply(this,arguments)}}))),s.a.createElement(O.a,{exact:!0,path:"".concat(J,"/new")},s.a.createElement(j.a,{updateInvoice:g})),s.a.createElement(O.a,{path:"".concat(J,"/:invoiceId")},s.a.createElement(E.a,{updateInvoice:g})))};n.d(t,"default",(function(){return K}))}}]);
//# sourceMappingURL=9.70c5c8e9.chunk.js.map